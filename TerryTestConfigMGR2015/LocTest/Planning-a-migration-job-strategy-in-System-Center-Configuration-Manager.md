---
title: "在 System Center Configuration Manager 中规划迁移作业策略"
ms.custom: na
ms.date: 09/02/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: 
  - configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
applies_to: 
  - System Center Configuration Manager (current branch)
ms.assetid: a70bfbd4-757a-4468-9312-1c3b373ef9fc
caps.latest.revision: 6
caps.handback.revision: 5
robots: noindex
---
# 在 System Center Configuration Manager 中规划迁移作业策略
使用迁移作业来配置要迁移到你的 [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)] 环境的特定数据。 迁移作业确定你计划迁移的对象，并且在目标层次结构中的顶层站点上运行。 你可以为每个源站点配置一个或多个迁移作业。 这允许你一次迁移所有对象，或限制随每个作业一起迁移的数据子集。  
  
 你可以在 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 从源层次结构中的一个或多个站点成功收集数据后创建迁移作业。 你可以按任何顺序从收集了数据的源站点中迁移数据。 对于 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 源站点，你只能从创建了对象的站点中迁移数据。 对于运行 [!INCLUDE[cm5short](../LocTest/includes/cm5short_md.md)] 或更高版本的源站点，可迁移的所有数据均位于源层次结构的顶层站点上。  
  
 在层次结构之间迁移客户端之前，请确保客户端使用的对象已迁移，并且这些对象在目标层次结构中可用。 例如，当你从 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 SP2 源层次结构中迁移时，可以对配置到包含客户端的自定义集合的内容进行播发。 在这种情况下，你应在迁移客户端之前迁移集合、播发和关联的内容。 这是因为，如果在客户端迁移之前未迁移内容、集合和播发，则此数据无法与目标层次结构中的客户端关联。 如果客户端未与之前运行的播发和内容的相关数据关联，则可能会为客户端提供用于在目标层次结构中安装的内容，而这可能是不必要的。 如果客户端在数据已迁移之后迁移，则客户端将与此内容和播发关联，并且，除非播发是重复进行的，否则不会再次为客户端提供已迁移播发的此内容。  
  
 某些对象需要将数据多次从源层次结构迁移到目标层次结构。 例如，为了成功将客户端的软件更新迁移到目标层次结构，你必须在目标层次结构中部署一个活动软件更新点，配置产品的目录，并将该软件更新点与 Windows Server Update Services \(WSUS\) 同步。  
  
 使用下列部分来帮助你规划迁移作业。  
  
-   [迁移作业的类型](#Types_of_Migration)  
  
-   [所有迁移作业的一般规划](#About_Migration_Jobs)  
  
-   [规划集合迁移作业](#About_Collection_Migration)  
  
-   [规划对象迁移作业](#About_Object_Migration)  
  
-   [规划以前迁移的对象迁移作业](#About_Object_Migrations)  
  
##  <a name="Types_of_Migration"></a> 迁移作业的类型  
 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 支持下列类型的迁移作业。 每种作业类型都旨在帮助定义你可包括在该作业中的对象：  
  
 **集合迁移**（仅当从 Configuration Manager 2007 SP2 迁移时受支持）\- 迁移与所选集合相关的对象。 默认情况下，集合迁移包括与集合成员关联的所有对象。 在使用集合迁移作业时，你可以排除特定对象实例。  
  
 **对象迁移** \- 迁移所选的单独对象。 仅选择你希望迁移的特定数据。  
  
 **以前迁移的对象迁移** \- 如果以前迁移的对象在迁移之后已在源层次结构中更新，则迁移这些对象。  
  
###  <a name="Objects_that_can_migrate"></a> 可迁移的对象  
 并非每个对象都可通过特定类型的迁移作业进行迁移。 以下列表确定你可以使用每种类型的迁移作业迁移的对象的类型。  
  
> [!NOTE]  
>  只有在从 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 SP2 源层次结构中迁移对象时，集合迁移作业才可用。  
  
 **可以用于迁移每个对象的作业类型：**  
  
-   **播发**（可从支持的 Configuration Manager 2007 源站点中迁移）\)  
  
    -   集合迁移  
  
-   **资产智能目录**  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **资产智能硬件要求**  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **资产智能软件列表**  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **边界**  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **配置基线**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **配置项目**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **维护时段**  
  
    -   集合迁移  
  
-   **操作系统部署启动映像**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **操作系统部署驱动程序包**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **操作系统部署驱动程序**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **操作系统部署映像**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **操作系统部署包**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **软件分发包**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **软件计数规则**  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **软件更新部署包**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **软件更新部署模板**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **软件更新部署**  
  
    -   集合迁移  
  
-   **软件更新列表**  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **任务序列**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    -   以前迁移的对象迁移  
  
-   **虚拟应用程序包**  
  
    -   集合迁移  
  
    -   对象迁移  
  
    > [!IMPORTANT]  
    >  尽管可通过使用对象迁移来迁移虚拟应用程序包，但无法使用迁移作业类型“以前迁移的对象迁移” 来迁移这些包。 作为替代，你必须从目标站点中删除迁移的虚拟应用程序包，然后创建一个新迁移作业来迁移虚拟应用程序。  
  
##  <a name="About_Migration_Jobs"></a> 所有迁移作业的一般规划  
 使用创建迁移作业向导来创建迁移作业以将对象迁移到目标层次结构。 你创建的迁移作业的类型确定哪些对象可供迁移。 你可以创建和使用多个迁移作业以从同一源站点或多个源站点中迁移数据。 使用一种类型的迁移作业并不会妨碍使用其他类型的迁移作业。  
  
 一个迁移作业运行成功后，其状态将列为“已完成”  ，并且无法再次运行。 但是，你可以创建一个新迁移作业来迁移已由原始作业迁移的任何对象，并且新迁移作业也可包括其他对象。 当你创建其他迁移作业时，之前已迁移的对象显示的状态为“已迁移” 。 你可以选择这些对象以再次迁移它们；但是，除非对象在源层次结构中已更新，否则再次迁移这些对象是不必要的。 如果对象在最初迁移后已在源层次结构中更新，你可以在使用迁移作业类型“迁移之后修改的对象” 时标识该对象。  
  
 你可以在迁移作业运行之前将其删除。 但是，在迁移作业完成之后，它将一直显示在 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 控制台中，并且无法删除。 每个已完成或尚未运行的迁移作业会一直显示在 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 控制台中，直至你完成迁移过程并清理迁移数据为止。  
  
> [!NOTE]  
>  通过使用“清理迁移数据”  操作完成迁移之后，你可以重新配置与当前源层次结构相同的层次结构，以使你之前迁移的对象再次显示。  
  
 可在 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 控制台中查看任何迁移作业中包含的对象，方式是选中迁移作业，然后单击“作业对象”  选项卡。  
  
 使用下列部分中的信息来帮助你规划所有迁移作业。  
  
### 数据选择  
 在创建集合迁移作业时，你必须选择一个或多个集合。 在你选择集合之后，创建迁移作业向导将显示与集合关联的对象。 默认情况下会迁移与所选集合关联的所有对象，但你可以清除不希望使用该作业迁移的对象。 当你清除具有从属对象的对象时，这些从属对象也将被清除。 会将所有清除的对象添加到排除列表。 将来的迁移作业将不会自动选择排除列表中的对象。 你必须手动编辑排除列表以删除要为在将来创建的迁移作业中的迁移自动选择的对象。  
  
### 已迁移内容的站点所有权  
 在为部署迁移内容时，你必须将内容对象分配给目标层次结构中的站点。 此站点随后将成为目标层次结构中该内容的所有者。 尽管目标层次结构的顶层站点是实际迁移内容元数据的站点，但却是分配的站点在网络上访问内容的原始源文件。  
  
 为了最大限度地减少迁移期间使用的网络带宽，请考虑将内容的所有权转让给最近的可用站点。 由于有关内容的信息是在 [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)]中全局共享的，因此该信息将在每个站点上可用。  
  
 尽管有关内容的信息是通过使用数据库复制共享到目标层次结构中的所有站点的，但你分配给主站点并随后部署到其他主站点上的分发点的任何内容将通过使用基于文件的复制传输。 此传输将经过管理中心站点，并随后传送到每个其他主站点。 在分配站点作为内容所有者时，通过在迁移之前或在迁移过程中将你打算分发到多个主站点的包集中在一起，你可以减少低带宽网络上的数据传输。  
  
### 为迁移的数据配置基于角色的管理安全作用域  
 在将数据迁移到目标层次结构时，你必须为迁移其数据的对象分配一个或多个基于角色的管理安全作用域。 这可确保只有适当的管理用户才能在数据迁移后访问此数据。 你指定的安全作用域由迁移作业定义，并应用于通过该作业迁移的每个对象。 如果你需要应用于不同对象集的不同安全作用域，并且要在迁移期间分配这些作用域，你必须通过使用不同的迁移作业迁移不同的对象集。  
  
 在配置迁移作业之前，请回顾 [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)] 中基于角色的管理的工作方式，并在必要时为迁移的数据配置一个或多个安全作用域，以控制谁将具有目标层次结构中已迁移对象的访问权限。  
  
 若要深入了解安全作用域和基于角色的管理，请参阅 [System Center Configuration Manager 基于角色的管理基础](../LocTest/Fundamentals-of-role-based-administration-for-System-Center-Configuration-Manager.md)。  
  
### 查看迁移操作  
 在配置迁移作业时，创建迁移作业向导将显示你为确保成功迁移所必需执行的操作的列表，以及 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 在所选数据的迁移过程中执行的操作的列表。 请仔细查看此信息以验证预期的结果。  
  
### 计划迁移作业  
 默认情况下，迁移作业将在创建后立即运行。 但是，你可以在创建作业时指定或稍后通过编辑作业的属性来指定迁移作业何时运行。 你可以将迁移作业安排在以下时间运行。  
  
-   立即运行作业  
  
-   在特定的开始时间运行作业  
  
-   不运行作业  
  
### 为迁移的数据指定冲突解决方案  
 默认情况下，除非你将迁移作业配置为跳过或覆盖之前已迁移到目标数据库的数据，否则迁移作业不会覆盖目标数据库中的数据。  
  
##  <a name="About_Collection_Migration "></a> 规划集合迁移作业  
 只有在从运行受支持的 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 版本的源层次结构中迁移数据时，集合迁移作业才可用。 按集合迁移数据时，必须指定一个或多个要迁移的集合。 对于你指定的每个集合，迁移作业会自动选择要迁移的所有相关对象。 例如，你选择特定的用户集合，那么，之后会识别集合成员，而且你可以迁移与该集合关联的部署。 可以根据需要选择与这些成员关联的、要迁移的其他部署对象。 所有这些选定的项目都将添加到可以迁移的对象的列表中。  
  
 迁移集合时， [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)] 也会迁移集合设置（包括维护时段和集合变量），但无法迁移有关 AMT 客户端设置的集合设置。  
  
 使用下列部分中的信息来了解可以应用于基于集合的迁移作业的其他配置。  
  
### 从集合迁移作业中排除对象  
 可以从集合迁移作业中排除特定的对象。 从集合迁移作业中排除特定的对象时，会将该对象添加到全局排除列表中，此列表包含你已经从为当前源层次结构中的任何源站点创建的迁移作业中排除的所有对象。 在未来的作业中，仍然可以迁移排除列表上的对象，但在你创建新的基于集合的迁移作业时，不会自动包括这些对象。  
  
 可以编辑排除列表，以删除以前排除的对象。 从排除列表中删除对象之后，在创建新的迁移作业期间，如果指定关联的集合，则会自动选择该对象。  
  
### 不支持的集合  
 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 可以从 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 源层次结构中迁移任何默认的用户集合、设备集合和大部分自定义集合。 但是， [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 无法迁移包含相同集合中的用户和设备的集合。  
  
 无法迁移下列集合:  
  
-   包含用户和设备的集合。  
  
-   包含对不同资源类型的集合的引用的集合。 例如，某个基于设备的集合具有子集合，或者包含指向基于用户的集合的链接。 在此例中，只会迁移顶层集合。  
  
-   包含将未知计算机包括在内的规则的集合。 可以迁移此类集合，但不会迁移将未知计算机包括在内的规则。  
  
### 空集合  
 空集合是指没有关联的资源的集合。 在 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 迁移空集合时，它会将集合转换为不包含用户或设备的组织文件夹。 此文件夹使用“用户集合”  或“设备集合”  节点下的空集合的名称创建而成，而该节点位于 **控制台的“资产和符合性”**[!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 工作区中。  
  
### 已链接的集合和子集合  
 在迁移链接到其他集合或具有子集合的集合时，除了链接的集合和子集合， [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 还在“用户集合”  或“设备集合”  节点下创建一个文件夹。  
  
### 集合依赖项和包括对象  
 在“创建迁移作业向导”中指定要迁移的集合时，会自动选择将包括在作业中的任何依赖的集合。 此行为确保在迁移后可以获得所有必需的资源。  
  
 例如：你为运行 Windows 7 的设备选择了一个命名为 **Win\_7** 的集合。 此集合受到包含所有客户端操作系统的集合（命名为 **All\_Clients**）的限制。 在迁移时，将会自动选择 **All\_Clients** 集合。  
  
### 集合限制  
 凭借 [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)]，集合是全局数据，且在层次结构的每个站点上接受评估。 因此，计划如何在迁移后限制集合的范围。 在迁移期间，可以标识要使用的目标层次结构中的集合，以限制你要迁移的集合的范围，从而确保迁移后的集合不会包含意料之外的成员。  
  
 例如，在 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 中，将在创建集合的站点和子站点上评估集合。 可以将播发仅部署到一个子站点，这会将播发的范围限制为该子站点。 相比之下，凭借 [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)]，可在每个站点上评估集合，然后为每个站点评估关联的播发。 集合限制可让你根据另一个集合来精简集合成员，以免加入意外的集合成员。  
  
### 站点代码替换  
 在迁移集合时，如何它包含用于标识 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 站点的条件，则必须指定目标层次结构中的特定站点。 这确保迁移后的集合在目标层次结构中仍然能够正常工作，而且不会扩大作用域。  
  
### 为迁移的播发指定行为  
 默认情况下，基于集合的迁移作业会禁用迁移到目标层次结构的播发。 这包括与播发关联的任何程序。 在创建包含播发且基于集合的迁移作业时，你会在“创建迁移作业向导”的“设置”页上看到“迁移播发后允许在 Configuration Manager 中部署程序”选项。 如果选择此选项，则在播发迁移后会启用与播发关联的程序。 最佳方案是，请勿选择此选项，而是在播发迁移后且可以验证将接收播发的客户端时启用这些程序。  
  
> [!NOTE]  
>  仅在创建基于集合的迁移作业且迁移作业包含播发时，你才会看到“在迁移播发后允许在 Configuration Manager 中部署程序”选项。  
  
 若要在迁移后启用某个程序，请在该程序的属性的“高级”  选项卡上清除“在播发此程序的计算机上禁用此程序”  选项。  
  
##  <a name="About_Object_Migration"></a> 规划对象迁移作业  
 与集合迁移不同的是，你必须选择要迁移的每个对象和对象实例。 可以选择单个对象（例如 [!INCLUDE[cmshort](../LocTest/includes/cmshort_md.md)] 2007 层次结构中的播发或者 [!INCLUDE[cm5short](../LocTest/includes/cm5short_md.md)] 或 [!INCLUDE[cm6long](../LocTest/includes/cm6long_md.md)] 层次结构中的发布），以添加到要为特定迁移作业迁移的对象的列表中。 对象迁移作业不会将你未添加到迁移列表中的任何对象迁移到目标站点。  
  
 除了那些适用于所有迁移作业的配置之外，基于对象的迁移作业并没有任何其他配置需要你加以规划。  
  
##  <a name="About_Object_Migrations"></a> 规划以前迁移的对象迁移作业  
 在源层次结构中更新你已迁移到目标层次结构的某个对象时，你可以使用“迁移之后修改的对象”  作业类型重新迁移该对象。 例如，在源层次结构中重命名或更新某个包的源文件时，此包的版本在源层次结构中会递增。 在此包的版本递增之后，该作业类型能够确定要迁移此包。  
  
 该作业类型与对象迁移类型相似，但有一点不同：当你选择要迁移的对象时，只能选择那些在由以前的迁移作业迁移后已更新的对象。  
  
 在选择该作业类型时，“创建迁移作业向导”的“设置”  页上的冲突解决行为会被配置为覆盖以前迁移的对象，而且无法更改此设置。  
  
> [!NOTE]  
>  该迁移作业可以识别源层次结构自动更新的对象，以及管理用户更新的对象。  
  
## 另请参阅  
 [规划迁移到 System Center Configuration Manager](../LocTest/Planning-for-migration-to-System-Center-Configuration-Manager.md)